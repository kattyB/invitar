<%=render :partial=>"header"%>

<form method="post" action="/admin/add_desgins" enctype="multipart/form-data">

  <table>
    <tr>
      <td>Country</td>
      <td><%=select "country", "id", @countries.collect {|p| [ p.name, p.id ] }%></td>
    </tr>

    <tr>
      <td>Category</td>
      <td>
        <%=select "category", "id", ""%>
        <%=text_field_tag "new_cat"%>
      </td>
    </tr>
    <tr>
      <td>Back Ground</td>
      <td><input type="file" name="bg_image"></input></td>
    </tr>

    <tr>
      <td>Front Image</td>
      <td><input type="file" name="main_image"></input></td>
    </tr>

    <tr>
      <td colspan="2">
        <input type="submit"></input>
      </td>
    </tr>
  </table>
</form>

<script>
  $('#country_id').change(function(){
    $.ajax({
      type:"get",
      url:"/admin/categories?c_id=" + $('#country_id').val(),
      success: function(results){        
        $('#category_id').html("<option>New Category</option>" + results);
      }
    }
  );
  });

  $('#category_id').change(function(){
    $('#new_cat').css('display', 'none');
    if($('#category_id :selected').val() == "New Category")
      $('#new_cat').toggle();
  });
</script>